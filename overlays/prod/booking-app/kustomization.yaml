apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Odporúčaná relatívna cesta k base
resources:
  - ../../../base/booking-app

# Aktualizácia image a tagu
images:
  - name: placeholder/bookingapp    # musí zodpovedať názvu v deployment.yaml
    newName: your-private-repo/bookingapp
    newTag: v1.0.0-prod

# Patches so správnym targetom
patches:
  - path: service-patch.yaml
    target:
      kind: Service
      name: booking-app-service   # musí presne sedieť s base/service.yaml

  - path: deployment-patch.yaml
    target:
      kind: Deployment
      name: booking-app          # musí presne sedieť s base/deployment.yaml

